---
title: "Get Queue Item"
scope: "redeploy"
path: "/queues/:id"
method: "GET"
response: |
  {
    "task_data": {
      "operation": "render",
      "payload": "..."
    },
    "log_key": "account_api_key",
    "agent_uuid": "agent-uuid-here"
  }
parameters:
  - name: id
    in: path
    required: true
    type: string
    description: "Queue name (currently only 'skycap_render_queue' is supported)"
  - name: host_name
    in: query
    required: true
    type: string
    description: "Host name of the agent requesting work"
---

# Get Queue Item

Retrieves the next available item from the specified queue and updates the queue agent record. This endpoint is typically used by Cloud66 agents to poll for work.

## Queue Agent Management

When an agent calls this endpoint:

1. **Agent Registration**: The agent is automatically registered or updated based on the `host_name` parameter
2. **Pulse Update**: The agent's last activity timestamp is updated
3. **Task Retrieval**: If available, the next task is retrieved from the queue
4. **Disabled Check**: Returns a message if the agent is disabled

## Response Scenarios

### Task Available
When a task is available in the queue, the response includes:
- Task data and payload
- Account API key for logging
- Agent UUID for tracking

### No Tasks Available
When the queue is empty, the endpoint returns `null`.

### Agent Disabled
If the agent is disabled, returns:
```json
{
  "ok": true,
  "message": "agent disabled"
}
```

<Callout type="warning" title="Supported Queues">
Currently only the `skycap_render_queue` is supported. Requesting other queue names will result in a 404 error.
</Callout>

<RelatedModels models={['AsyncAction']} />
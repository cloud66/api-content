---
title: Update Policy
scope: redeploy
path: /stacks/:stack_id/formations/:formation_id/policies/:id
method: PUT
response: |
  {
    "response": {
      "ok": true,
      "message": "Policy updated successfully"
    }
  }
request_body: |
  {
    "message": "Update network policy to allow database connections",
    "policy": {
      "name": "updated-security-policy",
      "sequence": 2,
      "body": "apiVersion: v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-database\n  namespace: production\nspec:\n  podSelector:\n    matchLabels:\n      app: backend\n  policyTypes:\n  - Egress\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: database\n    ports:\n    - protocol: TCP\n      port: 5432",
      "tags": ["security", "database", "backend"]
    }
  }
parameters:
  - name: stack_id
    in: path
    required: true
    type: string
    description: Stack UID
  - name: formation_id
    in: path
    required: true
    type: string
    description: Formation UID
  - name: id
    in: path
    required: true
    type: string
    description: Policy UID
  - name: message
    in: body
    required: true
    type: string
    description: Commit message describing the policy changes
  - name: policy
    in: body
    required: true
    type: object
    description: Updated policy configuration
    properties:
      name:
        type: string
        description: Policy name (must remain unique within formation)
      sequence:
        type: integer
        description: Updated execution order
      body:
        type: string
        description: Updated YAML/JSON policy configuration
      tags:
        type: array
        description: Updated tags for policy organization
        items:
          type: string
---

Updates an existing deployment policy with new configuration settings.

Modifies the specified policy with new rules, sequence order, or other configuration changes. All policy updates are versioned and tracked with commit messages for audit purposes.

<Callout type="warning" title="Feature Flag Required">
This endpoint requires the formations feature flag to be enabled on your account. Contact support@cloud66.com if this feature is not available.
</Callout>

<RelatedModels models={['Policy', 'Formation', 'Stack']} />

**Update Capabilities:**
- **Configuration Body**: Modify YAML/JSON policy content
- **Sequence Order**: Change execution priority
- **Name Updates**: Rename policy (must remain unique)
- **Tag Management**: Add, remove, or modify organization tags
- **Version Control**: All changes create new policy versions

<Callout type="info" title="Permission Required">
You must have policy edit rights on the formation to update policies.
</Callout>

**Version Management:**
- Each update creates a new policy version
- Previous versions are retained for rollback capability
- Commit messages provide change tracking and documentation
- Version history includes user attribution and timestamps

**Sequence Considerations:**
- Changing sequence order affects deployment execution
- Lower numbers execute before higher numbers
- Consider dependencies when reordering policies
- Test sequence changes in non-production environments first

<ResponseCodes 
  codes={[200, 400, 401, 403, 404, 422]}
  overrides={{
    200: "Success - Policy updated successfully",
    400: "Bad Request - Invalid policy configuration or parameters",
    403: "Forbidden - OAuth token lacks required `redeploy` scope or insufficient policy edit rights",
    404: "Not Found - Stack, formation, or policy not found",
    422: "Unprocessable Entity - Validation errors in policy configuration"
  }}
/>
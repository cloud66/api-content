---
title: Generate Formation from Snapshot
scope: redeploy
path: /stacks/:stack_id/snapshots/:snapshot_id/formations/:formation_id
method: GET
response: |
  {
    "response": {
      "ok": true,
      "stencils": [
        {
          "filename": "nginx.conf",
          "content": "server {\n  listen 80;\n  location / {\n    proxy_pass http://backend;\n  }\n}"
        },
        {
          "filename": "database.yml",
          "content": "production:\n  adapter: postgresql\n  database: myapp_production\n  host: <%= ENV['DB_HOST'] %>"
        }
      ],
      "issues": [],
      "requested_files": ["nginx.conf", "database.yml"],
      "filter": "filter-123-uuid"
    }
  }
parameters:
  - name: stack_id
    in: path
    required: true
    type: string
    description: Stack UID
  - name: snapshot_id
    in: path
    required: true
    type: string
    description: Snapshot UID
  - name: formation_id
    in: path
    required: true
    type: string
    description: Formation UID
  - name: filter
    in: query
    required: false
    type: string
    description: Filter UUID or name to apply (defaults to pass-all filter)
  - name: use_latest
    in: query
    required: false
    type: boolean
    description: Whether to use latest configuration (defaults to true)
  - name: requested_files
    in: query
    required: false
    type: string
    description: Comma-separated list of specific files to include (defaults to all formation stencils)
---

Generates a rendered formation configuration from the specified snapshot.

Returns the processed stencils and configuration files based on the snapshot state, formation definition, and optional filters. This endpoint is useful for retrieving deployment-ready configurations from historical snapshots.

<Callout type="info" title="Formation Rendering">
The response includes rendered stencils with variables resolved based on the snapshot's state and the selected filter's criteria.
</Callout>

<RelatedModels models={['Snapshot', 'Formation', 'Stack', 'Stencil', 'Filter']} />

**Response Fields:**
- **ok**: Whether the rendering process completed without issues
- **stencils**: Array of rendered configuration files
- **issues**: Array of any issues encountered during rendering
- **requested_files**: List of files that were processed
- **filter**: UUID of the filter that was applied

<ResponseCodes 
  codes={[200, 400, 401, 403, 404]}
  overrides={{
    200: "Success - Returns rendered formation configuration",
    400: "Bad Request - Nothing to download or invalid parameters",
    403: "Forbidden - OAuth token lacks required `redeploy` scope",
    404: "Not Found - Stack, snapshot, formation, or filter not found"
  }}
/>
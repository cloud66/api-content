---
title: Create Formation
scope: redeploy
path: /stacks/:stack_id/formations
method: POST
response: |
  {
    "response": {
      "uid": "formation-456-def",
      "name": "api-formation",
      "tags": ["production", "api"],
      "status": "ready",
      "base_templates": [
        {
          "id": 47,
          "name": "API Template",
          "git_repo": "https://github.com/cloud66/template-api.git",
          "git_branch": "main"
        }
      ],
      "stencils": [],
      "filters": [],
      "policies": [],
      "workflows": [],
      "helm_releases": [],
      "transformations": [],
      "selected_filter": null,
      "created_at_iso": "2023-01-15T11:00:00Z",
      "updated_at_iso": "2023-01-15T11:00:00Z"
    }
  }
request_body: |
  {
    "name": "api-formation",
    "base_template": {
      "repo": "https://github.com/cloud66/template-api.git",
      "branch": "main"
    },
    "tags": ["production", "api"]
  }
parameters:
  - name: stack_id
    in: path
    required: true
    type: string
    description: Stack UID
  - name: name
    in: body
    required: true
    type: string
    description: Name for the new formation
  - name: base_template
    in: body
    required: false
    type: object
    description: Single base template configuration (use this OR base_templates)
  - name: base_templates
    in: body
    required: false
    type: array
    description: Array of base template configurations (use this OR base_template)
  - name: tags
    in: body
    required: false
    type: array
    description: Tags to assign to the formation
---

Creates a new formation with the specified base templates and configuration.

Formations require access to valid and verified Template Libraries in your account. You must specify either a single `base_template` or an array of `base_templates`.

<Callout type="info" title="Template Library Access">
You must have a valid Template Library with the specified repo/branch combination in your account before creating a formation.
</Callout>

<RelatedModels models={['Formation', 'Stack', 'BaseTemplate']} />

<ResponseCodes 
  codes={[200, 400, 401, 403, 404]}
  overrides={{
    200: "Success - Formation created successfully",
    400: "Bad Request - Invalid formation parameters or validation errors",
    403: "Forbidden - OAuth token lacks required `redeploy` scope or formations feature not enabled",
    404: "Not Found - Stack not found or no valid Template Library found"
  }}
/>